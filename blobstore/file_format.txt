The structure of the files stored by blobstore is described in this document.

Files start with the following header (9 bytes):

version (uint8) | flags (uint64)

version: currently always 1
flags: reserved for future use

The then metadata follows, using this format (16 bytes + metadata length):
metadata size (uint64) | fnv64a metadata (uint64) | the metadata itself (variable)

Finally, it comes the file data, using the format (16 bytes + data length):

data size (uint64) |Â fnv64a data (uint64) | the data itself (variable)


If the any size or fnv don't match what's recoreded, the file
should be considered as corrupted.


Each file is assigned a BSON id, which consists of 24 hexadecimal characters and
usually will be automatically generated by the library, but can be provided by
the caller.

The filesystem backend stores files in xx/yyyyyyyyyyyyyyyyyyyyyy where xx are the last 2 characters
of the id and the y's are the rest of the id. The reason the first two characters are not
used is because BSON ids start with the timestamp, so choosing those two bytes would
not provide a good distribution of the files between the different directories.
